# LiveTalkOpenAISummarizeSample
LiveTalk から出力した CSV ファイルを読み込んで、 Azure OpenAI の gpt-3.5-turbo モデルを使って CSV ファイルに記録された発言内容の要約を表示するサンプルです。  
本サンプルコードは、 .NET 7.0 で作成しています。コードレベルでは .NET Framework 4.6 と互換性があります。

OpenAI のモデルには様々なものが用意されていますが、今回は、「gpt-3.5-turbo」モデルを使用します。

GPT-3.5 モデル以降は、呼び出しの JSON 形式などが変わります（ gpt-35-turbo については従来のJSON形式でも呼び出せます）。この流れは GPT-4 モデルでも同様です。今後、 GPT-4 モデルの呼び出しも今回のサンプルコードの形での利用となります。

# 事前準備
1. Azure OpenAI Service を利用できるように Azure Portal にサインインして設定を行います。そのためには、有効な Azure アカウントにサインイン、または、無料アカウントを作成して Azure Portal にサインインします。
2. [リソースの作成] の検索機能で「Azure OpenAI」を [作成] をクリックします。
3. [リージョン] には、「East US」を指定します。
4. [リソースグループ] 、 [名前] 、 [価格レベル] を指定して、 [確認と作成] をクリックします。
5. 表示された内容に問題がなければ、 [作成] をクリックします。
6. 作成が完了したら、該当リソースに移動します。 [キーとエンドポイント] メニューにより「キー」と「エンドポイント」を表示し、それぞれメモしておきます。
7. メモした「キー」と「エンドポイント」は、 App.config ファイルの「APIKey」と「APIResourceName」に設定します。
8. Azure Portal の「モデル デプロイ」メニューから「展開の管理」ボタンをクリックして、 Azure OpenAI Studio を開いてモデルのデプロイを実施します。
9. Azure OpenAI Studioにて [管理]-[デプロイ] メニューからデプロイ画面を開いて [新しいデプロイの作成] からモデルのデプロイ（利用開始）を実施します。
10. モデルとして「 gpt-35-turbo 」を選択し、モデル名も「 gpt-35-turbo 」として [作成] ボタンをクリックしてモデルのデプロイをします。

# サンプルコードの動き
本サンプルでは、LiveTalkを使って会議での発話を音声認識した結果を会議後に保存した CSV ファイルを入力して、指定されたプロンプトの内容で、 text-davinci-003 モデルにて処理した結果を表示します。
初期プロンプトとしては「 Provide a summary of the text below that captures its main idea. 」を採用しているので「以下の文章について、その主旨を捉えた要約を述べてください。」という問いに ChatGPT-3.5 相当の gpt-35-turbo モデルが要約を回答してくれることになります。

サンプルコード動作を簡単に説明すると次のような動作をします。  
1. [ファイル]-[開く] メニューにて、LiveTalkから出力した CSV ファイルを指定します。指定したファイル名は、 [連携ファイル] 欄に表示されます。
2. [Start] ボタンをクリックすると、 SummarizeModel クラスの中で次のように API を呼び出します。

   1. 指定されたファイル名から発言内容を取り出します。
   2. JSON形式でリクエスト本文を作成します。
   3. 作成したリクエスト本文を https://{0}.openai.azure.com/openai/deployments/{1}/chat/completions?api-version=2023-05-15 に http-Post します。「{0}」には App.Config に指定した「APIResourceName」を設定します。「{1}」には画面で指定した「モデル名」を設定します。
   4. POST した結果として、completionsResponse の choices の内容を返却された要素数分だけ連結して「結果」とします。

3. 取得した「結果」を [結果] 欄に表示します。この表示欄の内容を選択してクリップボードにコピーできるます。

# 連絡事項
本ソースコードは、LiveTalkの保守サポート範囲に含まれません。  
頂いたissueについては、必ずしも返信できない場合があります。  
LiveTalkそのものに関するご質問は、公式WEBサイトのお問い合わせ窓口からご連絡ください。
